!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","moment"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("moment"),n=function(){function e(e){void 0===e&&(e={}),this._o=function(){var e,t,n={start:new Date,end:new Date(Date.now()+2592e6),id:"date-range-picker",selectionType:"sequential",firstSelectionDuration:1,nightSelection:!1,monthFormat:"MMMM"},o=0,a="YYYY-MM-DD",c=function(e,n){e.innerHTML="";for(var o=r(n.start).startOf("month"),c=r(n.end).endOf("month"),l=o.clone(),u={};l.isBetween(o,c,null,"[]");){var s=!l.isBetween(n.start,n.end,null,"[]"),f=n.locked&&n.locked.indexOf(l.format(a))>-1,m=l.format("YYYY-MM");u[m]=u[m]||{weeks:{},name:l.format(t.monthFormat),id:m};var g=l.format("YYYY-w");u[m].weeks[g]=u[m].weeks[g]||{days:[{},{},{},{},{},{},{}],id:g,start:l.clone().startOf("week")};var y=l.weekday();l.date();u[m].weeks[g].days[y]={value:l,date:l.date(),name:l.format("dddd"),short:l.format("ddd"),outOfRange:s,isLocked:f},(l=l.clone()).add(1,"d")}Object.keys(u).forEach(function(e){Object.keys(u[e].weeks).forEach(function(t){var r=u[e].weeks[t];r.days.forEach(function(e,t){if(!e.value){var o=r.start.clone().add(t,"d"),a=!o.isBetween(n.start,n.end,null,"[]");e.value=o,e.date=o.date(),e.name=o.format("dddd"),e.short=o.format("ddd"),e.filler=!0,e.outOfRange=a}})})});var k=document.createElement("div");k.className="drp",k.appendChild(d());var w=document.createElement("div");w.className="drp_scroller",k.appendChild(w),Object.keys(u).forEach(function(e){w.appendChild(i(u[e]))}),e.appendChild(k),p(document.querySelectorAll(".drp_day"),"click",v),p(document.querySelectorAll(".drp_left-arrow"),"click",h),p(document.querySelectorAll(".drp_right-arrow"),"click",_)},d=function(){var e=document.createElement("div");e.className="drp_toolbar";var t=document.createElement("div");t.className="drp_left-arrow",t.innerHTML='<i class="material-icons">navigate_before</i>',e.appendChild(t);var r=document.createElement("div");return r.className="drp_right-arrow",r.innerHTML='<i class="material-icons">navigate_next</i>',e.appendChild(r),e},i=function(e){var t=document.createElement("div");return t.className="drp_month",t.setAttribute("data-id",e.id),t.setAttribute("data-name",e.name),Object.keys(e.weeks).forEach(function(r){t.appendChild(l(e.weeks[r]))}),t},l=function(e){var t=document.createElement("div");return t.className="drp_week",t.setAttribute("data-id",e.id),e.days.forEach(function(e,r){t.appendChild(u(e))}),t},u=function(e){var t=document.createElement("div");t.className="drp_day",t.setAttribute("data-id",e.date),t.setAttribute("data-name",e.name),t.setAttribute("data-short",e.short),t.setAttribute("data-value",e.value.format(a)),t.setAttribute("data-locked",e.isLocked),e.isLocked&&s(t,"drp_locked"),e.filler&&s(t,"drp_placeholder"),e.outOfRange&&s(t,"drp_out-of-range");var r=document.createElement("div");return r.className="drp_day_content",r.setAttribute("data-id",e.date),t.appendChild(r),t},s=function(e,t){if(!m(e,t)){var r=e.className.split(" ");r.push(t),e.className=r.join(" ")}},f=function(e,t){if(m(e,t)){var r=e.className.split(" "),n=r.indexOf(t);r.splice(n,1),e.className=r.join(" ")}},m=function(e,t){return e.className.split(" ").indexOf(t)>-1},p=function(e,t,r){for(var n=0;n<e.length;n++){e[n].addEventListener(t,r,!0)}},v=function(e){var r=e.currentTarget.getAttribute("data-value");L(r)&&(g(),k()),y(r,b().length?1:t.firstSelectionDuration)},h=function(t){t.currentTarget;var r,n=e.querySelector(".drp_scroller"),a=(n.scrollLeft,E(n.children));o>0&&(r=a[--o]),r&&(n.scrollLeft=r.offsetLeft)},_=function(t){t.currentTarget;var r,n=e.querySelector(".drp_scroller"),a=(n.scrollLeft,E(n.children));o<a.length-1&&(r=a[++o]),r&&(n.scrollLeft=r.offsetLeft)},g=function(){E(document.querySelectorAll(".drp_selected")).forEach(function(e){f(e,"drp_selected")})},y=function(e,n){if(void 0===n&&(n=1),!e)return t.onchange&&t.onchange(),g();e=r(e);for(var o=[],c=0;c<n;c++){var d=e.clone().add(c,"d").format(a);o.push(d)}if(q(o)){if("sequential"==t.selectionType){var i=b("moment");if(i.length){var l=i[0],u=i[i.length-1];if(e.isSame(l)||e.isSame(u))t.firstSelectionDuration>1&&t.firstSelectionDuration>=b().length&&(g(),o=[]);else if(e.isAfter(l)){o=[];for(s=l.clone();e.isAfter(s);){f=s.format(a);o.push(f),s=s.clone().add(1,"d")}o.push(e.format(a)),g()}else if(e.isBefore(l)){o=[];for(var s=e.clone();u.isAfter(s);){var f=s.format(a);o.push(f),s=s.clone().add(1,"d")}o.push(u.format(a)),g()}}}o.forEach(function(e){for(var t=document.querySelectorAll('[data-value="'+e+'"]'),r=0;r<t.length;r++){var n=t[r];Y(n)}});var m=b();w(m[0]),t.nightSelection,t.onchange&&t.onchange()}},k=function(){E(document.querySelectorAll(".drp_out-of-sequence")).forEach(function(e){f(e,"drp_out-of-sequence")})},w=function(e){if(k(),"sequential"==t.selectionType&&e){for(var n=A(e,"moment"),o=n.clone(),c=o.format(a);q([c]);)o.subtract(1,"d"),c=o.format(a);var d=o.clone();for(c=(o=n.clone()).format(a);q([c]);)o.add(1,"d"),c=o.format(a);var i=o.clone();E(document.querySelectorAll(".drp_day")).forEach(function(e){r(e.getAttribute("data-value")).isBetween(d,i)||s(e,"drp_out-of-sequence")})}},A=function(e,t){void 0===t&&(t="string");var n=r(e);switch(t){case"string":return n.format(a);case"date":return n.toDate();case"moment":return n;default:return e}},b=function(e){void 0===e&&(e="string");return E(document.querySelectorAll(".drp_selected")).reduce(function(t,r){var n=r.getAttribute("data-value");return t.push(A(n,e)),t},[])},q=function(e){return e.filter(function(e){return!!E(document.querySelectorAll('[data-value="'+e+'"]')).filter(S).length}).length==e.length},E=function(e){if(void 0===e.length)throw new Error("Not Array like");for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},S=function(e){return!(m(e,"drp_placeholder")||m(e,"drp_out-of-range")||m(e,"drp_locked")||m(e,"drp_out-of-sequence"))},L=function(e){var t=r(e).format(a);return!!E(document.querySelectorAll('[data-value="'+t+'"]')).filter(function(e){return m(e,"drp_out-of-sequence")}).length},Y=function(e){m(e,"drp_placeholder")||m(e,"drp_out-of-range")||m(e,"drp_locked")||m(e,"drp_out-of-sequence")||function(e,t){m(e,t)?f(e,t):s(e,t)}(e,"drp_selected")};return{_setConfig:function(o){if(t=Object.assign({},n,o),e&&(e.innerHTML=""),!(e=document.getElementById(t.id)))throw new Error('Element with ID "'+t.id+'" does not exists.');t.locale&&r.locale(t.locale),c(e,t)},_select:y,_values:b,_goto:function(t){var n=r(t).format("YYYY-MM"),a=e.querySelector(".drp_scroller"),c=E(a.children),d=c.reduce(function(e,t,r){return t.getAttribute("data-id")==n&&(e=r),e}),i=c[d];i&&(o=d,a.scrollLeft=i.offsetLeft)}}}(),this._o._setConfig(e)}return e.prototype.select=function(e,t){void 0===t&&(t=1),this._o._select(e,t)},e.prototype.values=function(e){return this._o._values(e)},e.prototype.goto=function(e){this._o._goto(e)},e}();t.DateRangePicker=n});